#!/bin/bash
#Date:Sep-03-2020
#Author:Aruna Bakarr Sesay
#Discription:Script to delete old log messages

echo "\n*****Script to delete old log messages*****\n"

prev_count=0
fpath=/var/log/boot.log
find $fpath -type f -mtime +15  -exec ls -ltrd {} \; > /var/log/boot.log
find $fpath -type f -mtime +15  -exec rm -rf {} \;
count=$(cat /tmp/file.out | wc -l)
if [ "$prev_count" -lt "$count" ] ; then

MESSAGE="/var/log/boot.log"
TO="bakarr_sesay@yahoo.com"
echo "Log files are deleted older than 14 days"  >> $MESSAGE
echo "+--------------------------------------------- +" >> $MESSAGE
echo "" >> $MESSAGE
cat /var/log/boot.log | awk '{print $6,$7,$9}' >> $MESSAGE
echo "" >> $MESSAGE
SUBJECT="WARNING: Log files are deleted older than 14 days $(date)"
mail -s "$SUBJECT" "$TO" < $MESSAGE
rm $MESSAGE /var/log/boot.log
fi

